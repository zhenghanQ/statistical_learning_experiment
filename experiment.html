<!DOCTYPE html>
<html>

<head>
    <title>VSL</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
    <script src="jspsych-5.0.3/jspsych.js"></script>
    <script src="jspsych-5.0.3/plugins/jspsych-text.js"></script>
    <script src="jspsych-5.0.3/plugins/jspsych-single-stim.js"></script>
    <link href="jspsych-5.0.3/css/jspsych.css" rel="stylesheet" type="text/css"></link>
</head>

<body>
    
    <script>
   
    var timeline = [];
    
    var welcome_block = {
        type: "text",
        text: "Welcome to the experiment. Press any key to begin."
    };
    
    timeline.push(welcome_block);
    
    var instructions_block = {
        type: "text",
        text: "<p>In this experiment you will see images appear one at a time</p>" +
              "<p>your job is simply to watch the images as they appear and press any key</p>" +
              "<p>when you see a yellow circle appear on the screen.</p>",
        timing_post_trial: 2000
    };
    
    timeline.push(instructions_block);
    
    var circle_trial = {
        type: 'single-stim',
        stimulus: 'images/circle.png',
        timing_response: 796,
        timing_post_trial: 200
    };
    
    var triangle_trial = {
        type: 'single-stim',
        stimulus: 'images/triangle.png',
        timing_response: 796,
        timing_post_trial: 200
    };
    
    var trapezoid_trial = {
        type: 'single-stim',
        stimulus: 'images/trapezoid.png',
        timing_response: 796,
        timing_post_trial: 200
    };
    
    timeline.push(circle_trial, triangle_trial, trapezoid_trial);
    
    var debrief_block = {
        type: "text",
        text: function() {
    return "<p>Your average response time was <strong>" +
           getAverageResponseTime() + "ms</strong>. Press " +
           "any key to complete the experiment. Thank you!</p>";
  }
};

function getAverageResponseTime() {

   var trials = jsPsych.data.getTrialsOfType('single-stim');

   var sum_rt = 0;
   var valid_trial_count = 0;
   for (var i = 0; i < trials.length; i++) {
    if (trials[i].rt > -1) {
      sum_rt += trials[i].rt;
      valid_trial_count++;
    }
  }
  return Math.floor(sum_rt / valid_trial_count);
}
    
    
    jsPsych.init({
        timeline: timeline,
        fullscreen: true,
        on_finish: function() {
        }
    });

</script> 
    
</body>

<html>
